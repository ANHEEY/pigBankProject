<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
     
    <!-- namespace="패키지명.인터페이스" -->
<mapper namespace="com.pigbank.project.dao.ChuMapper">

	<select id="savingList" resultType="com.pigbank.project.dto.SavingProductDTO">
		SELECT * FROM savings_product
	</select>
	
	<select id="depositList" resultType="com.pigbank.project.dto.DepositProductDTO">
		SELECT * FROM deposit_product
	</select>
	
	<select id="loanList" resultType="com.pigbank.project.dto.LoanProductDTO">
		SELECT * FROM loan_product
	</select>
	
	<select id="depositAccountList" parameterType="String" resultType="com.pigbank.project.dto.DepositAccountDTO">
		SELECT  DISTINCT da.dNum, a.id,  da.acNumber, da.dPdName, da.dAmount, da.dExpAmount, da.dJoinDate, da.dEndDate, da.dDeAccount
                FROM d_account_tbl da, deposit_product d, account_tbl a
                WHERE da.dPdName = d.dPdName
                AND da.acNumber = a.acNumber
                AND a.id=#{id}
	</select>
	
	<select id="depositDetail" parameterType="long" resultType="com.pigbank.project.dto.TransferDTO">
		SELECT DISTINCT t.tNum
			, t.acNumber
			, t.tDepositNum
			, t.tDepositBank
			, t.tType
			, t.tAmount
			, t.myMemo
			, t.yourMemo
			, t.tDate
		FROM d_account_tbl da, transfer_tbl t
		WHERE da.acNumber = t.acNumber 
		AND t.acNumber = #{acNumber}
		ORDER BY t.tDate DESC 
	</select>
	
	<select id="savingAccountList" parameterType="String" resultType="com.pigbank.project.dto.SavingAccountDTO">
		SELECT *  
		FROM s_account_tbl s, ACCOUNT_TBL a  
		WHERE s.ACNUMBER = a.ACNUMBER  
		AND a.id=#{id}
	</select>
	
	<select id="loanAccountList" parameterType="String" resultType="com.pigbank.project.dto.LoanAccountDTO">
		SELECT *
          FROM  l_account_tbl l, loan_req_tbl r
          WHERE l.LREQNUM  = r.LREQNUM 
          AND id =#{id} 
	</select>
	
	<select id="loanState" resultType="com.pigbank.project.dto.LoanAccountDTO">
		SELECT lReqNum
       		 , lPdName
       		 , lAmount
        	 , lState
	    FROM loan_req_tbl
	    WHERE id = 'hong1234'
	</select>
	
	<select id="accountList" parameterType="String" resultType="com.pigbank.project.dto.AccountDTO">
		SELECT *
		FROM account_tbl
		WHERE acType='입출금통장'
	  	AND id=#{id}
	</select>
	
	<select id="accountDetail" parameterType="long" resultType="com.pigbank.project.dto.TransferDTO">
		SELECT DISTINCT t.tNum
			, t.acNumber
			, t.tDepositNum
			, t.tDepositBank
			, t.tType
			, t.tAmount
			, t.myMemo
			, t.yourMemo
			, t.tDate
		FROM account_tbl a, transfer_tbl t
		WHERE a.ACNUMBER = t.ACNUMBER 
		AND a.ACNUMBER = #{acNumber}
		ORDER BY t.tDate DESC
	</select>
	
	<select id="transferList" resultType="com.pigbank.project.dto.TransferDTO">
		SELECT * FROM transfer_tbl ORDER BY tNum DESC
	</select>
	
	<select id="exchangeList" resultType="com.pigbank.project.dto.ExchangeRateListDTO">
		SELECT * FROM chuexchange_tbl2 
	</select>
	
</mapper>